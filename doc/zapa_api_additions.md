# Zapa API Additions

In order to be a useful resource for the zapavm Avalanche plugin, the following RPC endpoints have been added or modified:

## Get Serialized Block (Added)

### Spec

getserializedblock "height"

Retrieve the serialized representation for the block at the given height


Arguments:
1. "height"         (string, required) The height of the block for which we'd like the serialized representation. e.g. "0" for the genesis block.

Result:
{
  "block"      (number[]) The serialized byte representation of the block
  "timestamp"  (number) When the block was produced
  ,...
}

### Examples

#### Request

```
curl --location --request POST 'http://test:pw@127.0.0.1:8232' \
--header 'Content-Type: text/plain' \
--data-raw '{"jsonrpc": "1.0", "id":"curltest", "method": "getserializedblock", "params": ["0"] }'
```

#### Response

```
{
	"result": [{
		"block": [4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
				  0, 0, 0, 219, 77, 122, 133, 183, 104, 18, 63, 29, 255, 29, 76, 76, 236, 231, 0, 131, 178, 210, 126,
				  17, 123, 74, 194, 227, 29, 8, 121, 136, 165, 234, 196, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
				  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 218, 229, 73, 77, 15, 15, 15, 32, 9, 0, 0, 0, 0, 
				  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 36, 1, 147, 107, 125,
				  177, 235, 74, 195, 159, 21, 27, 135, 4, 100, 45, 10, 139, 218, 19, 236, 84, 125, 84, 205, 94, 67, 186,
				  20, 47, 198, 216, 135, 124, 171, 7, 179, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
				  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255, 77, 4, 255, 255, 7, 31, 1, 
				  4, 69, 90, 99, 97, 115, 104, 48, 98, 57, 99, 52, 101, 101, 102, 56, 98, 55, 99, 99, 52, 49, 55, 101, 
				  101, 53, 48, 48, 49, 101, 51, 53, 48, 48, 57, 56, 52, 98, 54, 102, 101, 97, 51, 53, 54, 56, 51, 97, 
				  55, 99, 97, 99, 49, 52, 49, 97, 48, 52, 51, 99, 52, 50, 48, 54, 52, 56, 51, 53, 100, 51, 52, 255, 255,
				  255, 255, 1, 0, 0, 0, 0, 0, 0, 0, 0, 67, 65, 4, 103, 138, 253, 176, 254, 85, 72, 39, 25, 103, 241, 166, 
				  113, 48, 183, 16, 92, 214, 168, 40, 224, 57, 9, 166, 121, 98, 224, 234, 31, 97, 222, 182, 73, 246, 188, 
				  63, 76, 239, 56, 196, 243, 85, 4, 229, 30, 193, 18, 222, 92, 56, 77, 247, 186, 11, 141, 87, 138, 76, 112, 
				  43, 107, 241, 29, 95, 172, 0, 0, 0, 0],
		"timestamp": 1296688602
	}],
	"error": null,
	"id": "curltest"
}
```

## Validate Block (Added)

### Spec

validateBlock "serializedBlock"

Validate whethere or not this block contains only valid transactions


Arguments:
1. "serializedBlock" (number[]) The serialized byte representation of the block

Result:
"error"   The error causing this block to fail validation. The string "null" if this block is valid.

### Examples

#### Request

```
curl --location --request POST 'http://test:pw@127.0.0.1:8232' \
--header 'Content-Type: text/plain' \
--data-raw '{"jsonrpc": "1.0", "id":"curltest", "method": "validateBlock", "params": [4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
				  0, 0, 0, 219, 77, 122, 133, 183, 104, 18, 63, 29, 255, 29, 76, 76, 236, 231, 0, 131, 178, 210, 126,
				  17, 123, 74, 194, 227, 29, 8, 121, 136, 165, 234, 196, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
				  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 218, 229, 73, 77, 15, 15, 15, 32, 9, 0, 0, 0, 0, 
				  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 36, 1, 147, 107, 125,
				  177, 235, 74, 195, 159, 21, 27, 135, 4, 100, 45, 10, 139, 218, 19, 236, 84, 125, 84, 205, 94, 67, 186,
				  20, 47, 198, 216, 135, 124, 171, 7, 179, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
				  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255, 77, 4, 255, 255, 7, 31, 1, 
				  4, 69, 90, 99, 97, 115, 104, 48, 98, 57, 99, 52, 101, 101, 102, 56, 98, 55, 99, 99, 52, 49, 55, 101, 
				  101, 53, 48, 48, 49, 101, 51, 53, 48, 48, 57, 56, 52, 98, 54, 102, 101, 97, 51, 53, 54, 56, 51, 97, 
				  55, 99, 97, 99, 49, 52, 49, 97, 48, 52, 51, 99, 52, 50, 48, 54, 52, 56, 51, 53, 100, 51, 52, 255, 255,
				  255, 255, 1, 0, 0, 0, 0, 0, 0, 0, 0, 67, 65, 4, 103, 138, 253, 176, 254, 85, 72, 39, 25, 103, 241, 166, 
				  113, 48, 183, 16, 92, 214, 168, 40, 224, 57, 9, 166, 121, 98, 224, 234, 31, 97, 222, 182, 73, 246, 188, 
				  63, 76, 239, 56, 196, 243, 85, 4, 229, 30, 193, 18, 222, 92, 56, 77, 247, 186, 11, 141, 87, 138, 76, 112, 
				  43, 107, 241, 29, 95, 172, 0, 0, 0, 0] }'
```

#### Response

```
{
	"result": "null",
	"error": null,
	"id": "curltest"
}
```

## Suggest (Added)

### Spec

suggest

Suggest a new block to be added to consensus. Note this doesn't add the block to the blockchain, as this block has yet to be accepted.

Result:
{
  "block"      (number[]) The serialized byte representation of the block
  "timestamp"  (number) When the block was produced
  ,...
}

### Examples

#### Request

```
curl --location --request POST 'http://test:pw@127.0.0.1:8232' \
--header 'Content-Type: text/plain' \
--data-raw '{"jsonrpc": "1.0", "id":"curltest", "method": "suggest", "params": [] }'
```

#### Response

```
{
	"result": [{
		"block": [4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
				  0, 0, 0, 219, 77, 122, 133, 183, 104, 18, 63, 29, 255, 29, 76, 76, 236, 231, 0, 131, 178, 210, 126,
				  17, 123, 74, 194, 227, 29, 8, 121, 136, 165, 234, 196, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
				  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 218, 229, 73, 77, 15, 15, 15, 32, 9, 0, 0, 0, 0, 
				  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 36, 1, 147, 107, 125,
				  177, 235, 74, 195, 159, 21, 27, 135, 4, 100, 45, 10, 139, 218, 19, 236, 84, 125, 84, 205, 94, 67, 186,
				  20, 47, 198, 216, 135, 124, 171, 7, 179, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
				  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255, 77, 4, 255, 255, 7, 31, 1, 
				  4, 69, 90, 99, 97, 115, 104, 48, 98, 57, 99, 52, 101, 101, 102, 56, 98, 55, 99, 99, 52, 49, 55, 101, 
				  101, 53, 48, 48, 49, 101, 51, 53, 48, 48, 57, 56, 52, 98, 54, 102, 101, 97, 51, 53, 54, 56, 51, 97, 
				  55, 99, 97, 99, 49, 52, 49, 97, 48, 52, 51, 99, 52, 50, 48, 54, 52, 56, 51, 53, 100, 51, 52, 255, 255,
				  255, 255, 1, 0, 0, 0, 0, 0, 0, 0, 0, 67, 65, 4, 103, 138, 253, 176, 254, 85, 72, 39, 25, 103, 241, 166, 
				  113, 48, 183, 16, 92, 214, 168, 40, 224, 57, 9, 166, 121, 98, 224, 234, 31, 97, 222, 182, 73, 246, 188, 
				  63, 76, 239, 56, 196, 243, 85, 4, 229, 30, 193, 18, 222, 92, 56, 77, 247, 186, 11, 141, 87, 138, 76, 112, 
				  43, 107, 241, 29, 95, 172, 0, 0, 0, 0],
		"timestamp": 1296688602
	}],
	"error": null,
	"id": "curltest"
}
```

## Z Send Many (Modified)

### Spec

Only the return value differs from this spec https://zcash-rpc.github.io/z_sendmany.html

Result:

"serializedtx"      (number[]) The serialized byte representation of the transaction


